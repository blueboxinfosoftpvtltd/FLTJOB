webpackJsonp([36],{355:function(l,n,e){"use strict";function t(l){return d["ɵvid"](2,[(l()(),d["ɵted"](-1,null,["\n    "])),d["ɵncd"](null,0),(l()(),d["ɵted"](-1,null,["\n    "])),d["ɵncd"](null,1),(l()(),d["ɵted"](-1,null,["\n  "]))],null,null)}function u(l){return d["ɵvid"](0,[(l()(),d["ɵeld"](0,0,null,null,51,"ion-item-sliding",[],null,null,null,t,I)),d["ɵdid"](1,49152,null,2,k.a,[[2,y.a],w.a,d.Renderer,d.ElementRef,d.NgZone],null,null),d["ɵqud"](335544320,1,{item:0}),d["ɵqud"](603979776,2,{_itemOptions:1}),(l()(),d["ɵted"](-1,null,["\n      "])),(l()(),d["ɵeld"](5,0,null,0,34,"ion-item",[["class","item item-block"]],null,[[null,"click"]],function(l,n,e){var t=!0;if("click"===n){t=!1!==l.component.chat(l.context.$implicit.PhotoPath,l.context.$implicit.fkToPilotId,l.context.$implicit.receivername)&&t}return t},L.b,L.a)),d["ɵdid"](6,1097728,[[1,4]],3,M.a,[C.a,F.a,d.ElementRef,d.Renderer,[2,x.a]],null,null),d["ɵqud"](335544320,3,{contentLabel:0}),d["ɵqud"](603979776,4,{_buttons:1}),d["ɵqud"](603979776,5,{_icons:1}),d["ɵdid"](10,16384,null,0,E.a,[],null,null),(l()(),d["ɵted"](-1,2,["\n        "])),(l()(),d["ɵeld"](12,0,null,2,26,"ion-row",[["class","row"]],null,null,null,null,null)),d["ɵdid"](13,16384,null,0,_.a,[],null,null),(l()(),d["ɵted"](-1,null,["\n          "])),(l()(),d["ɵeld"](15,0,null,null,4,"ion-col",[["class","col"],["col-3",""]],null,null,null,null,null)),d["ɵdid"](16,16384,null,0,O.a,[],null,null),(l()(),d["ɵted"](-1,null,["\n            "])),(l()(),d["ɵeld"](18,0,null,null,0,"img",[["class","profile-photomsg"]],[[8,"src",4]],null,null,null,null)),(l()(),d["ɵted"](-1,null,["\n          "])),(l()(),d["ɵted"](-1,null,["\n          "])),(l()(),d["ɵeld"](21,0,null,null,16,"ion-col",[["class","col"],["col-9",""]],null,null,null,null,null)),d["ɵdid"](22,16384,null,0,O.a,[],null,null),(l()(),d["ɵted"](-1,null,["\n            "])),(l()(),d["ɵeld"](24,0,null,null,5,"ion-row",[["class","row"]],null,null,null,null,null)),d["ɵdid"](25,16384,null,0,_.a,[],null,null),(l()(),d["ɵted"](-1,null,["\n              "])),(l()(),d["ɵeld"](27,0,null,null,1,"div",[["style","margin-left: 20px"]],null,null,null,null,null)),(l()(),d["ɵted"](28,null,["",""])),(l()(),d["ɵted"](-1,null,["\n            "])),(l()(),d["ɵted"](-1,null,["\n            "])),(l()(),d["ɵeld"](31,0,null,null,5,"ion-row",[["class","row"]],null,null,null,null,null)),d["ɵdid"](32,16384,null,0,_.a,[],null,null),(l()(),d["ɵted"](-1,null,["\n              "])),(l()(),d["ɵeld"](34,0,null,null,1,"div",[["style","margin-left: 20px;margin-top: 10px;font-style: italic;"]],null,null,null,null,null)),(l()(),d["ɵted"](35,null,["",""])),(l()(),d["ɵted"](-1,null,["\n            "])),(l()(),d["ɵted"](-1,null,["\n          "])),(l()(),d["ɵted"](-1,null,["\n        "])),(l()(),d["ɵted"](-1,2,["\n      "])),(l()(),d["ɵted"](-1,null,["\n      "])),(l()(),d["ɵeld"](41,0,null,1,9,"ion-item-options",[],null,null,null,null,null)),d["ɵdid"](42,16384,[[2,4]],0,V.a,[d.ElementRef,w.a],null,null),(l()(),d["ɵted"](-1,null,["\n        "])),(l()(),d["ɵeld"](44,0,null,null,5,"button",[["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(l,n,e){var t=!0;if("click"===n){t=!1!==l.component.removeItem(l.context.$implicit.fkToPilotId)&&t}return t},$.b,$.a)),d["ɵdid"](45,1097728,null,0,D.a,[[8,""],F.a,d.ElementRef,d.Renderer],null,null),(l()(),d["ɵted"](-1,0,["\n          "])),(l()(),d["ɵeld"](47,0,null,0,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),d["ɵdid"](48,147456,null,0,N.a,[F.a,d.ElementRef,d.Renderer],{name:[0,"name"]},null),(l()(),d["ɵted"](-1,0,["\n        "])),(l()(),d["ɵted"](-1,null,["\n      "])),(l()(),d["ɵted"](-1,null,["\n    "]))],function(l,n){l(n,48,0,"trash")},function(l,n){l(n,18,0,d["ɵinlineInterpolate"](1,"",n.context.$implicit.PhotoPath,""));l(n,28,0,n.context.$implicit.receivername);l(n,35,0,n.context.$implicit.Message);l(n,47,0,d["ɵnov"](n,48)._hidden)})}function i(l){return d["ɵvid"](0,[(l()(),d["ɵeld"](0,0,null,null,5,"ion-list",[],null,null,null,null,null)),d["ɵdid"](1,16384,null,0,y.a,[F.a,d.ElementRef,d.Renderer,w.a,q.m,T.a],null,null),(l()(),d["ɵted"](-1,null,["\n\n    "])),(l()(),d["ɵand"](16777216,null,null,1,null,u)),d["ɵdid"](4,802816,null,0,A.i,[d.ViewContainerRef,d.TemplateRef,d.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),d["ɵted"](-1,null,["\n\n  "]))],function(l,n){l(n,4,0,n.component.msgList)},null)}function o(l){return d["ɵvid"](0,[(l()(),d["ɵeld"](0,0,null,null,8,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,j.b,j.a)),d["ɵdid"](1,4374528,null,0,B.a,[F.a,w.a,T.a,d.ElementRef,d.Renderer,W.a,Z.a,d.NgZone,[2,J.a],[2,S.a]],null,null),(l()(),d["ɵted"](-1,1,["\n\n  "])),(l()(),d["ɵand"](16777216,null,1,1,null,i)),d["ɵdid"](4,16384,null,0,A.j,[d.ViewContainerRef,d.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),d["ɵted"](-1,1,["\n  "])),(l()(),d["ɵted"](-1,1,["\n  "])),(l()(),d["ɵted"](-1,1,["\n  "])),(l()(),d["ɵted"](-1,1,["\n"]))],function(l,n){l(n,4,0,n.component.msgList)},function(l,n){l(n,0,0,d["ɵnov"](n,1).statusbarPadding,d["ɵnov"](n,1)._hasRefresher)})}Object.defineProperty(n,"__esModule",{value:!0});var d=e(0),a=(e(1),e(24),e(20)),s=e(17),r=(e(259),function(){function l(l,n,e,t,u,i,o){this.storage=l,this.navCtrl=n,this.navParams=e,this.provider=t,this.alertCtrl=u,this.app=i,this.socket=o}return l.prototype.ionViewDidEnter=function(){var l=this;this.storage.get("id").then(function(n){l.fkPilotId=n,console.log(l.fkPilotId),l.getRecentMsgList(l.fkPilotId)})},l.prototype.ionViewDidLoad=function(){console.log("ionViewDidLoad MessagePage")},l.prototype.getRecentMsgList=function(l){var n=this;this.provider.setloading(),this.provider.getRecentMsgList(l).subscribe(function(l){console.log(l),n.msg=l,null==n.msg.data?(n.msgList=null,n.provider.dismissloading(),n.presentAlert("Pilot","No messages found")):(n.msgList=n.msg.data.Messages,console.log(n.msgList),n.provider.dismissloading())})},l.prototype.presentAlert=function(l,n){this.alertCtrl.create({title:l,subTitle:n,buttons:["Ok"]}).present()},l.prototype.chat=function(l,n,e){this.socket.connect(),this.provider.setoppositeid(n),this.socket.emit("set-nickname","pilot"),this.app.getRootNav().push("ChatpagePage",{pkPilotId:n,PhotoPath:l,PilotFname:e,ismessage:!0,animate:!1})},l.prototype.removeItem=function(l){var n=this;this.provider.setloading(),console.log("delete call"),this.provider.deletemessage(this.fkPilotId,l).subscribe(function(l){n.provider.dismissloading(),n.successalert("Pilot","Conversation deleted successfully")})},l.prototype.successalert=function(l,n){var e=this;this.alertCtrl.create({title:l,message:n,buttons:[{text:"Ok",handler:function(){e.ionViewDidEnter()}}]}).present()},l.prototype.ionViewWillLeave=function(){},l}()),c=function(){return function(){}}(),m=e(148),p=e(149),f=e(150),g=e(151),h=e(152),v=e(153),R=e(154),b=e(155),P=e(156),k=e(176),y=e(70),w=e(4),I=d["ɵcrt"]({encapsulation:2,styles:[],data:{}}),L=e(160),M=e(21),C=e(16),F=e(2),x=e(51),E=e(69),_=e(46),O=e(45),V=e(109),$=e(43),D=e(23),N=e(27),q=e(8),T=e(9),A=e(11),j=e(147),B=e(25),W=e(6),Z=e(30),J=e(5),S=e(19),z=e(12),G=e(36),H=e(102),K=d["ɵcrt"]({encapsulation:2,styles:[],data:{}}),Q=d["ɵccf"]("page-message",r,function(l){return d["ɵvid"](0,[(l()(),d["ɵeld"](0,0,null,null,1,"page-message",[],null,null,null,o,K)),d["ɵdid"](1,49152,null,0,r,[s.b,S.a,z.a,a.a,G.a,W.a,H.WrappedSocket],null,null)],null,null)},{},{},[]),U=e(13),X=e(99),Y=e(44);e.d(n,"MessagePageModuleNgFactory",function(){return ll});var ll=d["ɵcmf"](c,[],function(l){return d["ɵmod"]([d["ɵmpd"](512,d.ComponentFactoryResolver,d["ɵCodegenComponentFactoryResolver"],[[8,[m.a,p.a,f.a,g.a,h.a,v.a,R.a,b.a,P.a,Q]],[3,d.ComponentFactoryResolver],d.NgModuleRef]),d["ɵmpd"](4608,A.l,A.k,[d.LOCALE_ID,[2,A.t]]),d["ɵmpd"](4608,U["ɵi"],U["ɵi"],[]),d["ɵmpd"](4608,U.FormBuilder,U.FormBuilder,[]),d["ɵmpd"](512,A.b,A.b,[]),d["ɵmpd"](512,U["ɵba"],U["ɵba"],[]),d["ɵmpd"](512,U.FormsModule,U.FormsModule,[]),d["ɵmpd"](512,U.ReactiveFormsModule,U.ReactiveFormsModule,[]),d["ɵmpd"](512,X.a,X.a,[]),d["ɵmpd"](512,X.b,X.b,[]),d["ɵmpd"](512,c,c,[]),d["ɵmpd"](256,Y.a,r,[])])})}});